---
id: "E06-T002"
title: "KB folder structure and navigation"
status: "in-progress"
workflow_state: "PR_READY"
priority: "critical"
epic: "E06"
agentic_style: "prescriptive"
depends_on: ["E06-T001"]
blocks: ["E06-T005", "E06-T006", "E06-T007"]
spec_file: "backlog/docs/specs/E06/E06-T002-spec.md"
qa_report: "backlog/docs/reviews/E06/E06-T002-qa-report.md"
updated_at: "2026-01-13T19:45:00Z"
docs_updated_at: "2026-01-13T19:45:00Z"
code_files:
  - "apps/docs/.vitepress/config.ts"
  - "apps/docs/src/index.md"
  - "apps/docs/src/auth/index.md"
  - "apps/docs/src/database/index.md"
  - "apps/docs/src/api/index.md"
  - "apps/docs/src/ai/index.md"
  - "apps/docs/src/testing/index.md"
  - "apps/docs/src/contributing/index.md"
  - "apps/docs/src/*/concepts/index.md"
  - "apps/docs/src/*/patterns/index.md"
  - "apps/docs/src/*/decisions/index.md"
  - "apps/docs/src/*/troubleshooting/index.md"
---

# KB Folder Structure and Navigation

## Description

Establish the domain-first folder structure within `apps/docs/src/` and configure VitePress sidebar navigation to match. Create placeholder index files for each domain section.

## Why This Matters

A consistent, intuitive folder structure makes documentation discoverable. Developers should be able to navigate to relevant docs without guessing where things live. The sidebar navigation mirrors the folder structure, providing visual orientation.

## Acceptance Criteria

- [x] AC1: Domain folders created in apps/docs/src/ (auth, database, api, ai, testing, contributing)
- [x] AC2: Each domain has index.md with section overview template
- [x] AC3: Sub-folder structure created (concepts/, patterns/, decisions/, troubleshooting/) per domain
- [x] AC4: VitePress sidebar configuration reflects folder structure
- [x] AC5: Navigation works correctly at all levels (domain, type, article)
- [x] AC6: Breadcrumb navigation displays correct path
- [x] AC7: KB homepage (apps/docs/src/index.md) links to all domains
- [x] AC8: Empty sections gracefully indicate "Coming soon" or similar
- [x] AC9: Folder structure documented in contributing section

## Constraints

- Sidebar should auto-generate from folder structure where possible
- Deep nesting should be avoided (max 3 levels: domain/type/article)
- Index files required for each folder to enable navigation
- Consistent naming convention (kebab-case for files/folders)

## Out of Scope

- Populating actual content (separate documentation tasks)
- Cross-linking implementation (E06-T008)
- Custom navigation components
- Breadcrumb customization

## Context

### Folder Structure

```
apps/docs/src/
├── index.md                     # KB homepage
├── auth/                        # Authentication domain
│   ├── index.md
│   ├── concepts/
│   │   └── .gitkeep
│   ├── patterns/
│   │   └── .gitkeep
│   ├── decisions/
│   │   └── .gitkeep
│   └── troubleshooting/
│       └── .gitkeep
├── database/                    # Database domain
│   ├── index.md
│   ├── concepts/
│   ├── patterns/
│   └── decisions/
├── api/                         # API domain
│   ├── index.md
│   ├── concepts/
│   ├── patterns/
│   └── decisions/
├── ai/                          # AI gateway domain
│   ├── index.md
│   ├── concepts/
│   ├── patterns/
│   └── decisions/
├── testing/                     # Testing domain
│   ├── index.md
│   ├── patterns/
│   └── troubleshooting/
└── contributing/                # How to contribute
    └── index.md
```

### Domain Mapping

| Domain | Codebase Area | Initially Documented |
|--------|---------------|---------------------|
| auth | packages/auth, auth middleware | Yes (E06-T005) |
| database | packages/db, Drizzle patterns | Yes (E06-T006) |
| api | apps/api, Fastify routes | Partial |
| ai | packages/ai, OpenRouter | Yes (E06-T007) |
| testing | Test patterns, Vitest | Yes (existing content) |
| contributing | How to contribute | Yes (E06-T008) |

### Domain Selection Rationale

- **Included:** Domains with completed implementations to document
- **Excluded for now:** frontend (apps/web not built), modules (not implemented), architecture (cross-cutting, add later)

Domains can be added as features are implemented.

## History

| Date | Event | Agent/User |
|------|-------|------------|
| 2026-01-13 | Task created | PM Agent |
| 2026-01-13 | Task analyzed, spec created | Analyst Agent |
| 2026-01-13 | Implementation completed | Developer Agent |
| 2026-01-13 | Integration testing passed | QA Agent |
| 2026-01-13 | Documentation updated | Tech Writer Agent |

## Implementation Notes

Successfully implemented complete domain-first folder structure and navigation:

**Files Created:** 24 new markdown files
- 6 domain index files with full content (auth, database, api, ai, testing, contributing)
- 18 subdirectory placeholder index files

**Files Modified:**
- [apps/docs/.vitepress/config.ts](apps/docs/.vitepress/config.ts): Added comprehensive sidebar navigation with 6 domains and nested type sections
- [apps/docs/src/index.md](apps/docs/src/index.md): Added "Browse by Domain" section with links to all domains
- [apps/docs/src/contributing/index.md](apps/docs/src/contributing/index.md): Added "Documentation Structure" section documenting folder organization

**Verification:**
- Build successful: `pnpm docs:build` passes with no errors
- TypeScript check passes: `pnpm typecheck` succeeds
- All navigation links point to valid pages (no 404s due to placeholder files)
- Folder structure matches specification exactly

**Domain Structure Created:**
- **auth, database, api, ai:** 4 subdirectories each (concepts, patterns, decisions, troubleshooting)
- **testing:** 2 subdirectories (patterns, troubleshooting)
- **contributing:** no subdirectories

All placeholder files use consistent "Coming Soon" template with navigation back to domain overview. VitePress breadcrumbs work automatically based on sidebar structure.

Ready for content population in subsequent documentation tasks (E06-T005 through E06-T010).

## Documentation Updates

**Writer:** Tech Writer Agent
**Date:** 2026-01-13

### Files Updated

| File | Changes |
|------|---------|
| `CLAUDE.md` | Expanded Knowledge Base section with domain-first structure documentation |
| `docs/ARCHITECTURE.md` | Added "Knowledge Base Structure" section to Related Documentation |
| `docs/CONVENTIONS.md` | Added "Documentation" section with KB contribution guidelines |

### Summary

Updated project documentation to reflect the VitePress Knowledge Base folder structure implemented in E06-T002:

1. **CLAUDE.md** - Enhanced the VitePress KB section with:
   - Complete folder structure showing domain directories
   - Domain organization table listing all 6 domains and their content types
   - Clear explanation of domain-first structure
   - Content type descriptions (concepts, patterns, decisions, troubleshooting)

2. **docs/ARCHITECTURE.md** - Added comprehensive KB reference:
   - New "Knowledge Base Structure" subsection under Related Documentation
   - Table of domains with coverage descriptions and access links
   - List of content types within each domain
   - Clear distinction between canonical, KB, and reference documentation
   - Local development command (`pnpm docs:dev`)

3. **docs/CONVENTIONS.md** - Added complete documentation contribution guide:
   - Step-by-step process for adding documentation
   - Domain and content type selection guidance
   - File naming conventions (kebab-case)
   - Frontmatter structure with examples
   - Documentation standards (naming, content, code examples)
   - Build and deployment commands

### Verification

- All code references are accurate (verified against implementation)
- Examples are consistent with existing patterns
- Links reference correct paths
- Formatting matches existing documentation style

The documentation now provides clear guidance for:
- Finding existing KB documentation by domain
- Contributing new documentation to the KB
- Understanding the domain-first organizational structure
- Following consistent naming and style conventions
