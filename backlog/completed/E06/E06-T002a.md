---
id: "E06-T002a"
title: "KB theme design and Modern Agricultural styling"
status: "in-progress"
priority: "high"
epic: "E06"
agentic_style: "prescriptive"
depends_on: ["E06-T002", "E06-T002b"]
blocks: []
workflow_state: "PR_READY"
spec_file: "backlog/docs/specs/E06/E06-T002a-spec.md"
updated_at: "2026-01-13T13:29:01Z"
code_files:
  - "apps/docs/src/.vitepress/theme/index.ts"
  - "apps/docs/src/.vitepress/theme/fonts.css"
  - "apps/docs/src/.vitepress/theme/style.css"
  - "apps/docs/src/.vitepress/config.ts"
  - "apps/docs/src/contributing/design-system.md"
  - "CLAUDE.md"
---

# KB Theme Design and Modern Agricultural Styling

## Description

Apply the Modern Agricultural design system to the VitePress knowledge base, establishing visual identity through color schemes, icons, and standardized UI patterns. Create both light and dark themes that reflect the RaptScallions brand while optimizing for simplicity, ease of access, and usability.

## Why This Matters

A thoughtfully designed knowledge base improves developer experience and reinforces brand identity. The Modern Agricultural theme establishes RaptScallions' visual languageâ€”growth, cultivation, and learningâ€”while ensuring documentation is easy to read and navigate in both light and dark modes.

## Acceptance Criteria

- [x] AC1: Custom VitePress theme configuration created at `apps/docs/.vitepress/theme/`
- [x] AC2: Light theme uses Modern Agricultural color palette (deep forest green primary, sky blue secondary, golden wheat accent)
- [x] AC3: Dark theme uses inverted palette maintaining readability and brand consistency
- [x] AC4: Custom CSS variables defined for both themes (colors, typography, spacing)
- [x] AC5: Agricultural icon system integrated (Sprout logo, leaf accents, growth indicators)
- [x] AC6: Typography uses DM Sans (body) and Comfortaa (logo/brand) per design system
- [x] AC7: Component styling maintains VitePress functionality while applying brand aesthetics
- [x] AC8: Homepage hero section styled with agricultural gradient and brand elements
- [x] AC9: Sidebar navigation styled with rounded cards and subtle shadows
- [x] AC10: Code blocks and inline code maintain readability in both themes
- [x] AC11: Design system documented in KB contributing section
- [x] AC12: Build passes with no style conflicts or warnings

## Constraints

- Must preserve VitePress built-in functionality (search, navigation, theme toggle)
- Design should be accessible (WCAG 2.1 AA color contrast ratios)
- Performance: additional CSS should not significantly impact load times
- Mobile responsive: design must work on small screens
- Simple over complex: avoid heavy JavaScript or animations

## Out of Scope

- Complete UI redesign (leverage VitePress defaults where appropriate)
- Custom search UI (keep VitePress local search)
- Interactive animations or transitions
- Custom documentation components (cards, callouts) - future enhancement
- Multi-language support styling

## Context

### Modern Agricultural Design System (from MODERN_DESIGN_PROTOTYPE.md)

**Color Palette:**

**Light Theme:**

- Primary: Deep Forest Green (#15803d to #22c55e gradient)
  - Green-700: #15803d (dark)
  - Green-600: #16a34a (medium)
  - Green-500: #22c55e (base)
  - Green-100: #dcfce7 (light bg)
  - Green-50: #f0fdf4 (lighter bg)
- Secondary: Sky Blue (#0ea5e9 to #38bdf8)
  - Blue-500: #0ea5e9 (base)
  - Blue-400: #38bdf8 (light)
  - Blue-100: #e0f2fe (light bg)
- Accent: Golden Wheat (#f59e0b to #fbbf24)
  - Amber-500: #f59e0b (base)
  - Amber-400: #fbbf24 (light)
- Neutrals: Warm grays with green undertone
  - Stone-50: #fafaf9 (bg)
  - Stone-100: #f5f5f4 (card bg)
  - Stone-200: #e7e5e4 (borders)
  - Stone-600: #57534e (text secondary)
  - Stone-900: #1c1917 (text primary)

**Dark Theme:**

- Primary: Lighter greens for contrast
  - Green-400: #4ade80 (base)
  - Green-500: #22c55e (accents)
  - Green-900: #14532d (dark bg accents)
- Backgrounds: Dark warm grays
  - Stone-950: #0c0a09 (main bg)
  - Stone-900: #1c1917 (card bg)
  - Stone-800: #292524 (elevated surfaces)
- Text: Light warm grays
  - Stone-100: #f5f5f4 (primary text)
  - Stone-400: #a8a29e (secondary text)

**Typography:**

- Headings: "DM Serif Display", Georgia, serif
- Body: "DM Sans", system-ui, sans-serif
- Code: "Monaco", "Courier New", monospace

**Agricultural Icons:**

- Logo: Sprout (ðŸŒ±) with gradient background
- Growth indicators: Progress rings, trending arrows
- Section markers: Leaf, seed, sun motifs
- Success/completion: Green check circles

**Design Tokens:**

- Border radius: Rounded (8px base, 12px cards, 16px buttons)
- Shadows: Subtle (0 1px 3px rgba(0,0,0,0.04) for cards)
- Spacing: 4px base unit (multiples of 4 for consistency)

### VitePress Theming Approach

VitePress supports theme customization through `.vitepress/theme/`:

```
apps/docs/.vitepress/theme/
â”œâ”€â”€ index.ts              # Theme entry point
â”œâ”€â”€ style.css             # Custom CSS overrides
â””â”€â”€ custom.css            # Additional styles (optional)
```

**Implementation Pattern:**

1. Extend default VitePress theme
2. Override CSS variables for colors
3. Add custom styles for brand elements
4. Load custom fonts from Google Fonts
5. Configure theme in `.vitepress/config.ts`

### Key Areas to Style

| Area          | Priority | Approach                     |
| ------------- | -------- | ---------------------------- |
| Color scheme  | Critical | CSS variables override       |
| Typography    | Critical | Font imports + CSS variables |
| Logo/branding | High     | Custom hero section, favicon |
| Navigation    | High     | Sidebar, navbar styling      |
| Content cards | Medium   | Homepage feature cards       |
| Code blocks   | Medium   | Syntax highlighting theme    |
| Buttons/links | Medium   | Brand colors, rounded style  |
| Badges        | Low      | Can use defaults initially   |

### CSS Variable Override Strategy

VitePress uses CSS custom properties that can be overridden:

```css
:root {
  /* Brand colors */
  --vp-c-brand-1: #22c55e; /* Green-500 */
  --vp-c-brand-2: #16a34a; /* Green-600 */
  --vp-c-brand-3: #15803d; /* Green-700 */

  /* Backgrounds */
  --vp-c-bg: #fafaf9; /* Stone-50 */
  --vp-c-bg-soft: #f5f5f4; /* Stone-100 */

  /* Typography */
  --vp-font-family-base: "DM Sans", sans-serif;
  --vp-font-family-mono: Monaco, Courier, monospace;
}

.dark {
  --vp-c-brand-1: #4ade80; /* Lighter for dark mode */
  --vp-c-bg: #0c0a09; /* Stone-950 */
  --vp-c-bg-soft: #1c1917; /* Stone-900 */
}
```

### Design Simplicity Guidelines

**Simple > Complex:**

- Use VitePress defaults for navigation, search, and core UI
- Apply brand colors through CSS variables, not complete redesign
- Add agricultural touches through icons and accents, not heavy graphics
- Maintain clean, readable layouts focused on content

**Ease of Access:**

- High contrast ratios for text readability
- Clear visual hierarchy (headings, sections)
- Generous whitespace and line height
- Obvious interactive elements (buttons, links)

**Usability First:**

- Fast load times (minimal custom CSS)
- Responsive on all screen sizes
- Keyboard navigation preserved
- Screen reader compatibility

### Implementation Phases

**Phase 1: Foundation (Critical)**

1. Create theme directory structure
2. Set up CSS variable overrides
3. Import Google Fonts (DM Sans, DM Serif Display)
4. Apply color palette to both themes
5. Verify build and theme toggle work

**Phase 2: Brand Elements (High)** 6. Style homepage hero with agricultural gradient 7. Add Sprout logo/branding 8. Update favicon and site metadata 9. Style sidebar navigation (rounded cards)

**Phase 3: Polish (Medium)** 10. Refine code block styling 11. Adjust button and link styles 12. Fine-tune spacing and typography 13. Document design system in contributing guide

### References

**Source Documents:**

- [MODERN_DESIGN_PROTOTYPE.md](../../../docs/references/initial_planning/MODERN_DESIGN_PROTOTYPE.md) - Complete design system with tokens and components

**VitePress Documentation:**

- [Extending the Default Theme](https://vitepress.dev/guide/extending-default-theme)
- [Custom CSS](https://vitepress.dev/guide/custom-theme#customizing-css)
- [Theme Config](https://vitepress.dev/reference/default-theme-config)

**Related Tasks:**

- E06-T001 (VitePress setup) - Foundation for theming
- E06-T002 (Folder structure) - Navigation structure to style
- E06-T008 (Contribution guide) - Where to document design system

### Success Metrics

**Visual Verification:**

- [ ] Homepage hero displays agricultural gradient correctly
- [ ] Light theme uses deep greens and warm neutrals
- [ ] Dark theme uses lighter greens on dark backgrounds
- [ ] DM fonts load and render correctly
- [ ] Theme toggle switches colors smoothly
- [ ] All text meets WCAG AA contrast ratios

**Technical Verification:**

- [ ] `pnpm docs:dev` starts with no CSS warnings
- [ ] `pnpm docs:build` completes successfully
- [ ] No broken styles on mobile viewports
- [ ] Page load performance remains fast (<3s)
- [ ] Browser DevTools show correct CSS variable values

**Usability Verification:**

- [ ] Content is easy to read in both themes
- [ ] Navigation is intuitive and visually clear
- [ ] Interactive elements are obvious (hover states)
- [ ] Code examples are readable and well-formatted

## Implementation Specification

See: [E06-T002a-spec.md](../../docs/specs/E06/E06-T002a-spec.md)

## Documentation Updates

The following documentation was created or updated as part of this task:

### Created

- **[apps/docs/src/contributing/design-system.md](../../apps/docs/src/contributing/design-system.md)** - Complete Modern Agricultural design system documentation including:
  - Color palette (light and dark themes)
  - Typography (DM Sans and DM Serif Display fonts)
  - Design tokens (border radius, shadows, spacing, transitions)
  - Gradients (hero and logo)
  - Component styling guidelines
  - Accessibility information (contrast ratios, keyboard navigation)
  - Usage guidelines and implementation details

### Updated

- **[CLAUDE.md](../../CLAUDE.md)** - Added Design System section to Knowledge Base documentation:
  - Modern Agricultural design system overview
  - Color and typography references
  - Link to complete design system documentation
  - Theme file locations

### Theme Implementation

- **[apps/docs/src/.vitepress/theme/index.ts](../../apps/docs/src/.vitepress/theme/index.ts)** - VitePress theme entry point extending default theme
- **[apps/docs/src/.vitepress/theme/style.css](../../apps/docs/src/.vitepress/theme/style.css)** - Complete CSS overrides for Modern Agricultural design
- **[apps/docs/src/.vitepress/theme/fonts.css](../../apps/docs/src/.vitepress/theme/fonts.css)** - Google Fonts import for DM Sans and DM Serif Display

### Configuration

- **[apps/docs/src/.vitepress/config.ts](../../apps/docs/src/.vitepress/config.ts)** - Updated with:
  - Google Fonts preconnect links for performance
  - Removed incorrect `srcDir: './src'` that was causing pages not to generate

## History

| Date       | Event       | Notes                                                                                |
| ---------- | ----------- | ------------------------------------------------------------------------------------ |
| 2026-01-13 | Created     | Task created with detailed context                                                   |
| 2026-01-13 | Analyzed    | Comprehensive implementation spec created by Analyst agent                           |
| 2026-01-13 | Implemented | Modern Agricultural theme successfully applied to VitePress KB, all ACs met          |
| 2026-01-13 | Fixed       | Moved theme files to correct location (src/.vitepress/theme/) for VitePress to load  |
| 2026-01-13 | UI Review   | Hero contrast issue identified and fixed with dark overlay + text shadows - APPROVED |
| 2026-01-13 | QA PASS     | All 12 ACs verified, tests pass (394/394), build succeeds, WCAG 2.1 AAA contrast     |
| 2026-01-13 | Config Fix  | Fixed VitePress config (removed incorrect srcDir), pages now generate correctly      |
| 2026-01-13 | Docs Update | Updated CLAUDE.md with design system info, task documentation complete               |
| 2026-01-14 | Design Refresh | Updated theme: Comfortaa logo font, Warm Earth Tones light, Golden Wheat dark       |
