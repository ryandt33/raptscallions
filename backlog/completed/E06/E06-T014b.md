---
id: "E06-T014b"
title: "Document current workflow system in KB"
status: "todo"
priority: "medium"
task_type: "documentation"
workflow: "documentation"
labels:
  - documentation
  - kb
  - current
assignee: ""

workflow_state: "DONE"
epic: "E06"
agentic_style: "deliberative"
depends_on: ["E06-T014a"]
blocks: []
breakpoint: false
assigned_agent: ""

created_at: "2026-01-16T00:00:00Z"
updated_at: "2026-01-16T00:00:00Z"
started_at: ""
completed_at: ""

spec_file: ""
analysis_file: ""
test_files: []
code_files: []
pr_url: ""
---

# E06-T014b: Document Current Workflow System in KB

## Description

Create complete reference documentation for the **current deliberative workflow system**: agents, commands, workflow overview, and workflow categories. This consolidates all current/active workflow documentation into one task.

### Section Purpose

The KB needs browsable, searchable documentation of the AI agents and slash commands that drive our **current** development workflow. This is the authoritative reference for how tasks are executed.

## Why This Matters

New developers (human or AI) joining the project need to understand what agents and commands exist. Currently, this information is scattered across `.claude/agents/` and `.claude/commands/` with no searchable index. Having KB pages with summaries and cross-references makes the development tooling discoverable and reduces onboarding friction.

The index page should clearly state that this is the **source of truth** for current workflow.

## Acceptance Criteria

- [ ] AC1: Deliberative workflow overview page created at `apps/docs/src/ai-development/workflows/deliberative.md`
- [ ] AC2: KB page created for each agent in `.claude/agents/` (in `apps/docs/src/ai-development/agents/current/`)
- [ ] AC3: KB page created for each command category in `.claude/commands/` (in `apps/docs/src/ai-development/commands/`)
- [ ] AC4: Agent index page (`agents/current/index.md`) updated with registry table and navigation
- [ ] AC5: Command index page (`commands/index.md`) updated with commands grouped by category and workflow
- [ ] AC6: Index pages state "This is the source of truth for current (deliberative) workflow"
- [ ] AC7: Cross-references to E06-T014a (prescriptive/historical) for context
- [ ] AC8: VitePress sidebar updated to include new pages
- [ ] AC9: `pnpm docs:build` succeeds with no errors

## Constraints

- **Content source**: Agent/command pages should summarize the source file, not duplicate it entirely (avoid drift)
- **Discoverability**: Each page must have proper frontmatter for VitePress search
- **Maintenance**: Include `source_synced_at` frontmatter field to track when page was last synced with source file
- **Navigation**: Sidebar items should be alphabetically ordered within their sections
- **Source of truth**: Index clearly indicates these are the current active agents/commands

## Workflow

**Category:** `documentation` (standard)

**Rationale:** Creating new KB pages (not updating existing), multiple documents with structured content. Standard workflow applies because:
- New pages being created
- Multiple related documents (agents + commands)
- Needs outline for structure planning
- No code examples to verify (just links to source files)

**Phases:**
1. `/outline` - Define page structure for agents and commands sections
2. Human approval of outline
3. `/write-docs` - Create the KB pages
4. `/review-docs` - Technical accuracy check
5. PR creation

### First Command

Run `/outline E06-T014b` (writer)

## Source Material

**Workflow definitions:**
- `.claude/workflows/README.md` - Workflow overview
- `.claude/workflows/development.md`
- `.claude/workflows/schema.md`
- `.claude/workflows/infrastructure.md`
- `.claude/workflows/documentation.md`
- `.claude/workflows/bugfix.md`

**Current agents (10 files):**
- `.claude/agents/pm.md`
- `.claude/agents/analyst.md`
- `.claude/agents/architect.md`
- `.claude/agents/designer.md`
- `.claude/agents/developer.md`
- `.claude/agents/qa.md`
- `.claude/agents/reviewer.md`
- `.claude/agents/writer.md`
- `.claude/agents/trainer.md`
- `.claude/agents/git-agent.md`

**Current commands:**
- `.claude/commands/analyst/` - `/analyze`, `/analyze-schema`
- `.claude/commands/architect/` - `/review-plan`
- `.claude/commands/developer/` - `/write-tests`, `/implement`, `/investigate`
- `.claude/commands/designer/` - `/review-ux`, `/review-ui`, `/align-design`
- `.claude/commands/pm/` - `/plan`, `/replan-task`, `/roadmap`, `/epic-review`, `/next-task`, `/task-status`
- `.claude/commands/qa/` - `/qa`, `/verify-fix`, `/integration-test`
- `.claude/commands/reviewer/` - `/review-code`, `/review-migration`
- `.claude/commands/writer/` - `/outline`, `/write-docs`, `/review-docs`, `/update-docs`, `/document`
- `.claude/commands/trainer/` - `/audit`, `/postmortem`, `/refine-agent`, `/apply-improvements`, `/write-improvement`
- `.claude/commands/utility/` - `/commit-and-pr`, `/skip-github`, `/investigate-failure`

## Output Locations

**Workflow Page (1 file):**
- `apps/docs/src/ai-development/workflows/deliberative.md` - Deliberative workflow overview

**Agent Pages (10 files):**
- `apps/docs/src/ai-development/agents/current/pm.md`
- `apps/docs/src/ai-development/agents/current/analyst.md`
- `apps/docs/src/ai-development/agents/current/architect.md`
- `apps/docs/src/ai-development/agents/current/designer.md`
- `apps/docs/src/ai-development/agents/current/developer.md`
- `apps/docs/src/ai-development/agents/current/qa.md`
- `apps/docs/src/ai-development/agents/current/reviewer.md`
- `apps/docs/src/ai-development/agents/current/writer.md`
- `apps/docs/src/ai-development/agents/current/trainer.md`
- `apps/docs/src/ai-development/agents/current/git-agent.md`

**Command Pages (10 category pages):**
- `apps/docs/src/ai-development/commands/analyst.md`
- `apps/docs/src/ai-development/commands/architect.md`
- `apps/docs/src/ai-development/commands/developer.md`
- `apps/docs/src/ai-development/commands/designer.md`
- `apps/docs/src/ai-development/commands/pm.md`
- `apps/docs/src/ai-development/commands/qa.md`
- `apps/docs/src/ai-development/commands/reviewer.md`
- `apps/docs/src/ai-development/commands/writer.md`
- `apps/docs/src/ai-development/commands/trainer.md`
- `apps/docs/src/ai-development/commands/utility.md`

**Index Page Updates:**
- `apps/docs/src/ai-development/agents/current/index.md`
- `apps/docs/src/ai-development/commands/index.md`

**Config Update:**
- `apps/docs/src/.vitepress/config.ts` (sidebar entries)

**Total: 24 files to create/update**

## Out of Scope

- Prescriptive/archived workflow system (E06-T014a)
- Workflow orchestration patterns (separate task)

## Technical Notes

The deliberative workflow is characterized by:
- Analysts proposing multiple approaches without implementation code
- Architects selecting approach and defining constraints
- Developers having autonomy within constraints
- More flexible spec → implementation flow
- Used in E06+ tasks

## Future Improvements

These are potential enhancements that the writer agent should add to the KB improvements page after implementation:

1. **Automated sync checking** - CI action that warns when source files are newer than KB pages (compare file mtime vs `source_synced_at`)
2. **Single-source generation** - Script to auto-generate KB pages from source files with minimal wrapper content

## Document Outline

### Target Audience

**Primary:** Developers (human or AI) new to the RaptScallions project who need to understand the development workflow.

**Secondary:** Existing team members who need a searchable reference for agent capabilities and command usage.

**Context Required:** Basic familiarity with AI-assisted development concepts; understanding of task-based workflows.

---

### 1. Deliberative Workflow Overview Page (`apps/docs/src/ai-development/workflows/deliberative.md`)

#### Document Structure

1. **Introduction**
   - What deliberative means (flexible reasoning, agent-driven decisions)
   - How it differs from prescriptive (link to prescriptive.md)
   - When this workflow is used (E06+ tasks)

2. **Core Philosophy**
   - Analyst explores solution space, doesn't prescribe
   - Architect selects approach and defines constraints
   - Developer has autonomy within constraints
   - User checkpoints between each command

3. **Workflow Categories**
   - Table: development, schema, infrastructure, documentation, bugfix
   - When to use each category
   - Link to `.claude/workflows/README.md` for full details

4. **Workflow Variants**
   - Simple variants (infra:simple, docs:simple, bugfix:simple, bugfix:hotfix)
   - Modifier labels (frontend, security)
   - Decision criteria for choosing variants

5. **Command Flow Diagrams**
   - Quick reference for each category (development, schema, infrastructure, documentation, bugfix)
   - ASCII flow diagrams showing command sequences

6. **Human Checkpoints**
   - When human approval is required
   - How to override agent suggestions
   - Final decision authority

7. **Status Values**
   - Status progression: DRAFT → ANALYZED → APPROVED → TESTS_READY → etc.
   - What each status means

8. **Related Pages**
   - Link to agents index
   - Link to commands index
   - Link to prescriptive workflow (historical)

#### Code Examples Needed
- None (overview page, links to detailed pages)

---

### 2. Agent Index Page Update (`apps/docs/src/ai-development/agents/current/index.md`)

#### Document Structure

1. **Introduction**
   - Banner: "This is the source of truth for current (deliberative) workflow agents"
   - What agents are and how they work
   - Link to deprecated agents for historical context

2. **Agent Registry Table**
   - Table columns: Agent | Role | Commands | Tools | Source File
   - All 10 agents alphabetically ordered

3. **Agent Lifecycle**
   - When agents are invoked
   - How agents hand off to each other
   - Fresh-eyes principle for certain agents

4. **Quick Reference**
   - Which agent to use for which task
   - Common agent combinations

5. **Navigation**
   - Links to individual agent pages

---

### 3. Individual Agent Pages (10 pages in `apps/docs/src/ai-development/agents/current/`)

Each agent page follows the same template structure:

#### Template Structure

1. **Frontmatter**
   - title, description, source_synced_at

2. **Agent Banner**
   - Name, description, tools list

3. **Role Summary**
   - What this agent does (2-3 sentences)
   - When it's activated (workflow states)

4. **Key Responsibilities**
   - Bulleted list of main duties

5. **Process Overview**
   - High-level steps (numbered list)
   - Reference to source file for full details

6. **Output Artifacts**
   - What files/sections the agent produces
   - Location patterns

7. **Commands That Invoke This Agent**
   - Table: Command | Description | Link

8. **Next Steps**
   - What workflow states lead to/from this agent

9. **Related Agents**
   - Links to agents that hand off to/from this one

10. **Source Reference**
    - Link to `.claude/agents/{agent}.md`

#### Individual Agent Notes

- **pm.md**: Include epic review responsibilities, task creation templates
- **analyst.md**: Include approach exploration philosophy, analysis output format
- **architect.md**: Include spec format, constraint definition
- **designer.md**: Include UX vs UI review distinction, NOT_APPLICABLE handling
- **developer.md**: Include TDD emphasis, test rejection rules, "no shortcuts" philosophy
- **qa.md**: Include adversarial testing philosophy, re-test process
- **reviewer.md**: Include TypeScript strictness rules, re-review process
- **writer.md**: Include doc update checklist, archive process
- **trainer.md**: Include 4 commands (/audit, /postmortem, /refine-agent, /apply-improvements)
- **git-agent.md**: Include CI check requirements, commit conventions

---

### 4. Command Index Page Update (`apps/docs/src/ai-development/commands/index.md`)

#### Document Structure

1. **Introduction**
   - Banner: "This is the source of truth for current (deliberative) workflow commands"
   - What slash commands are
   - How they invoke agents

2. **Commands by Category Table**
   - Groups: analyst, architect, developer, designer, pm, qa, reviewer, writer, trainer, utility
   - Columns: Command | Description | Agent | Workflow Categories

3. **Workflow → Command Mapping**
   - Which commands apply to which workflow category
   - Table format for quick lookup

4. **Navigation**
   - Links to individual category pages

5. **Related**
   - Link to archived commands for historical reference

---

### 5. Command Category Pages (10 pages in `apps/docs/src/ai-development/commands/`)

Each category page documents all commands in that category:

#### Template Structure

1. **Frontmatter**
   - title, description, source_synced_at

2. **Category Overview**
   - What this category of commands does
   - Which agent handles these commands

3. **Commands Table**
   - Command | Description | Used In Workflows

4. **Individual Command Sections** (for each command in category)
   - **Command Name**
   - **Purpose**: What it does
   - **Invocation**: How to call it
   - **Input**: What the command needs
   - **Output**: What artifacts it creates
   - **Next Step**: What command typically follows
   - **Source Reference**: Link to `.claude/commands/{category}/{command}.md`

5. **Related Commands**
   - Links to related commands in other categories

#### Category-Specific Notes

- **analyst.md**: `/analyze`, `/analyze-schema`
- **architect.md**: `/review-plan`
- **developer.md**: `/write-tests`, `/implement`, `/investigate`
- **designer.md**: `/review-ux`, `/review-ui`, `/align-design`
- **pm.md**: `/plan`, `/replan-task`, `/roadmap`, `/epic-review`, `/next-task`, `/task-status`
- **qa.md**: `/qa`, `/verify-fix`, `/integration-test`
- **reviewer.md**: `/review-code`, `/review-migration`
- **writer.md**: `/outline`, `/write-docs`, `/review-docs`, `/update-docs`, `/document`
- **trainer.md**: `/audit`, `/postmortem`, `/refine-agent`, `/apply-improvements`, `/write-improvement`
- **utility.md**: `/commit-and-pr`, `/skip-github`, `/investigate-failure`

---

### 6. VitePress Sidebar Configuration

Update `apps/docs/src/.vitepress/config.ts`:

1. **Agents Section Update**
   - Add current agent pages (alphabetically ordered)
   - Keep deprecated section as-is

2. **Commands Section Update**
   - Add category pages (alphabetically ordered)
   - Keep archived commands reference

3. **Workflows Section Update**
   - Add deliberative.md page
   - Keep prescriptive.md reference

---

### Code Examples Needed

None required for this documentation task. Pages link to source files rather than duplicating code.

---

### Related Documents

**Existing KB Pages:**
- [Prescriptive Workflow](/ai-development/workflows/prescriptive) - E06-T014a, historical reference
- [Deprecated Agents](/ai-development/agents/deprecated/) - E06-T014a, historical reference
- [Archived Commands](/ai-development/commands/archived) - E06-T014a, historical reference

**Source Files:**
- `.claude/workflows/README.md` - Workflow overview
- `.claude/agents/*.md` - Agent definitions
- `.claude/commands/**/*.md` - Command definitions

---

### Cross-References to E06-T014a

Each current workflow page should include a note like:

> For historical context on the prescriptive workflow used in E01-E05, see [Prescriptive Workflow](/ai-development/workflows/prescriptive).

This provides navigation without duplicating content.

---

### Total Files to Create/Update

| Category | Files | Action |
|----------|-------|--------|
| Workflow overview | 1 | Create: `deliberative.md` |
| Agent pages | 10 | Create: `pm.md`, `analyst.md`, etc. |
| Agent index | 1 | Update: `agents/current/index.md` |
| Command pages | 10 | Create: `analyst.md`, `architect.md`, etc. |
| Command index | 1 | Update: `commands/index.md` |
| Sidebar config | 1 | Update: `config.ts` |
| **Total** | **24** | |

## History

| Date       | State | Agent | Notes                                         |
| ---------- | ----- | ----- | --------------------------------------------- |
| 2026-01-16 | DRAFT | pm    | Task created - split from E06-T014 for deliberative workflow docs |
| 2026-01-16 | DRAFT | pm    | Consolidated: absorbed E06-T016 (workflow overview) - now 24 files total |
| 2026-01-16 | OUTLINED | writer | Document outline created with structure for all 24 files |
| 2026-01-16 | WRITING | writer | Documentation written: 24 files created/updated |
| 2026-01-16 | DOCS_REVIEW | writer | Technical accuracy review: APPROVED |

## Documentation Files Created

| File | Description |
|------|-------------|
| `apps/docs/src/ai-development/workflows/deliberative.md` | Deliberative workflow overview |
| `apps/docs/src/ai-development/workflows/index.md` | Workflows index (updated) |
| `apps/docs/src/ai-development/agents/current/index.md` | Current agents index (updated) |
| `apps/docs/src/ai-development/agents/current/analyst.md` | Analyst agent |
| `apps/docs/src/ai-development/agents/current/architect.md` | Architect agent |
| `apps/docs/src/ai-development/agents/current/designer.md` | Designer agent |
| `apps/docs/src/ai-development/agents/current/developer.md` | Developer agent |
| `apps/docs/src/ai-development/agents/current/git-agent.md` | Git agent |
| `apps/docs/src/ai-development/agents/current/pm.md` | PM agent |
| `apps/docs/src/ai-development/agents/current/qa.md` | QA agent |
| `apps/docs/src/ai-development/agents/current/reviewer.md` | Reviewer agent |
| `apps/docs/src/ai-development/agents/current/trainer.md` | Trainer agent |
| `apps/docs/src/ai-development/agents/current/writer.md` | Writer agent |
| `apps/docs/src/ai-development/commands/index.md` | Commands index (updated) |
| `apps/docs/src/ai-development/commands/analyst.md` | Analyst commands |
| `apps/docs/src/ai-development/commands/architect.md` | Architect commands |
| `apps/docs/src/ai-development/commands/designer.md` | Designer commands |
| `apps/docs/src/ai-development/commands/developer.md` | Developer commands |
| `apps/docs/src/ai-development/commands/pm.md` | PM commands |
| `apps/docs/src/ai-development/commands/qa.md` | QA commands |
| `apps/docs/src/ai-development/commands/reviewer.md` | Reviewer commands |
| `apps/docs/src/ai-development/commands/trainer.md` | Trainer commands |
| `apps/docs/src/ai-development/commands/utility.md` | Utility commands |
| `apps/docs/src/ai-development/commands/writer.md` | Writer commands |
| `apps/docs/src/ai-development/index.md` | AI development index (updated) |
| `apps/docs/src/.vitepress/config.ts` | Sidebar configuration (updated) |

## Verification

- [x] VitePress build passes (`pnpm docs:build`)
- [x] All sidebar links are valid
- [x] Source of truth banners on index pages
- [x] `source_synced_at` frontmatter on all new pages

## Reviews

### Docs Review

- **Reviewer:** writer
- **Date:** 2026-01-16
- **Verdict:** APPROVED
- **Notes:** Technical accuracy review complete

#### Technical Accuracy

| Section | Status | Notes |
|---------|--------|-------|
| Deliberative workflow overview | ✅ | Accurate workflow description, all categories covered |
| Agent Registry (10 agents) | ✅ | All agents documented with correct tools, commands, roles |
| Command Index | ✅ | All commands grouped correctly, workflow mapping accurate |
| Cross-References | ✅ | All internal links valid, source references exist |
| Sidebar Config | ✅ | All pages in config, alphabetically ordered |
| VitePress Build | ✅ | Build succeeds with no errors |

#### Verification Summary

**Source Files Verified:**
- `.claude/agents/*.md` — All 10 agent files exist and match KB descriptions
- `.claude/commands/**/*.md` — All command files exist for all categories
- `.claude/workflows/*.md` — All workflow files exist

**Link Validation:**
- All internal cross-references between pages are valid
- All source reference paths are correct
- Sidebar navigation matches file structure

**Build Validation:**
- `pnpm docs:build` completed successfully (7.27s)
- No dead links in AI development section
- All pages render correctly

#### Issues Found

**Must Fix:**
- None

**Should Fix:**
- None

**Suggestions:**
- Consider adding automated sync checking in the future (tracked in Future Improvements section)

### Plan Review

- **Reviewer:** architect
- **Date:**
- **Verdict:**
- **Notes:**

### Code Review

- **Reviewer:** reviewer
- **Date:**
- **Verdict:**
- **Notes:**

### QA Review

- **Reviewer:** qa
- **Date:**
- **Verdict:**
- **Notes:**
