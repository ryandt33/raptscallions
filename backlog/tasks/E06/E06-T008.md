---
id: "E06-T008"
title: "Cross-linking conventions and contribution guide"
status: "todo"
priority: "medium"
epic: "E06"
depends_on: ["E06-T005"]
blocks: []
---

# Cross-Linking Conventions and Contribution Guide

## Description

Establish conventions for cross-referencing between KB articles, linking to code files and backlog tasks. Write a comprehensive contribution guide that explains how to add and update KB documentation.

## Why This Matters

Consistent linking makes documentation navigable and traceable. A contribution guide ensures new docs (human or agent-authored) follow established patterns. Without standards, the KB will become inconsistent and hard to maintain.

## Acceptance Criteria

- [ ] AC1: Reference section template defined for all KB docs
- [ ] AC2: Convention for linking to backlog tasks documented
- [ ] AC3: Convention for linking to source code files documented
- [ ] AC4: Convention for linking to other KB docs (relative paths)
- [ ] AC5: Contribution guide written at apps/docs/src/contributing/documentation.md
- [ ] AC6: Templates provided for each doc type (concept, pattern, decision, troubleshooting)
- [ ] AC7: Frontmatter requirements documented with examples
- [ ] AC8: Domain selection guidance (where does my doc go?)
- [ ] AC9: Staleness tracking explained (how to keep docs fresh)
- [ ] AC10: Existing testing KB content integrated into structure
- [ ] AC11: Guide linked from KB homepage

## Constraints

- Links should work in both VitePress site and raw GitHub markdown
- Relative paths preferred for portability
- Task references should be machine-parseable for tooling
- Guide should be actionable, not just rules
- Templates should be copy-pasteable

## Out of Scope

- Automatic link generation
- Backlinks (showing what links to a page)
- External link validation
- Style guide for prose (grammar, tone)
- Spell check or linting setup

## Context

### Reference Section Template

Every KB doc should end with:

```markdown
## References

**Implements:** [E02-T002](../../../backlog/completed/E02/E02-T002.md)

**Key Files:**
- [session.service.ts](../../../packages/auth/src/session.service.ts) - Session CRUD operations
- [session.middleware.ts](../../../apps/api/src/middleware/session.middleware.ts) - Request hook

**Related Docs:**
- [OAuth Flow](./oauth-flow.md)
- [Guard Middleware Pattern](../patterns/guard-middleware.md)
```

### Linking Conventions

| Link Type | Format | Example |
|-----------|--------|---------|
| KB doc (same domain) | `./file.md` | `[Sessions](./sessions.md)` |
| KB doc (other domain) | `../domain/path.md` | `[CASL](../auth/concepts/casl.md)` |
| Completed task | Relative path | `[E02-T002](../../../backlog/completed/E02/E02-T002.md)` |
| Source file | Relative from kb root | `[session.service.ts](../../../packages/auth/src/session.service.ts)` |
| External URL | Full URL | `[Fastify Docs](https://fastify.dev/)` |

### Frontmatter Schema

```yaml
---
title: Session Lifecycle
related_code:
  - packages/auth/src/session.service.ts
  - apps/api/src/middleware/session.middleware.ts
implements_task: E02-T002
last_verified: 2026-01-13
---
```

### Doc Type Templates

**Concept Doc:**
```markdown
# [Concept Name]

## Overview
[1-2 paragraphs explaining what and why]

## How It Works
[Detailed explanation]

## Usage Examples
[Code from actual implementation]

## References
[Standard reference section]
```

**Pattern Doc:**
```markdown
# [Pattern Name]

## Problem
[What problem does this solve?]

## Solution
[How does the pattern work?]

## Implementation
[Code showing the pattern]

## When to Use / When Not to Use
[Guidance]

## References
[Standard reference section]
```

**Decision Record (ADR):**
```markdown
# ADR-NNN: [Decision Title]

## Context
[What situation led to this?]

## Decision
[What was decided?]

## Consequences
[Positive, negative, neutral impacts]

## Alternatives Considered
[What else was evaluated?]

## References
[Standard reference section]
```

**Troubleshooting Doc:**
```markdown
# [Problem Summary]

## Symptoms
[What does the user observe?]

## Cause
[Why does this happen?]

## Solution
[Step-by-step fix]

## Prevention
[How to avoid in future]

## References
[Standard reference section]
```

### Existing Content to Integrate

The existing `docs/kb/testing/` content should be integrated:
- `docs/kb/testing/fastify/README.md` → `apps/docs/src/testing/index.md`
- `docs/kb/testing/fastify/plugin-encapsulation.md` → `apps/docs/src/testing/patterns/fastify-encapsulation.md`

### Domain Selection Guide

| Your Topic | Domain | Subdirectory |
|------------|--------|--------------|
| How something works | {relevant domain} | concepts/ |
| How to implement something | {relevant domain} | patterns/ |
| Why we chose X over Y | {relevant domain} | decisions/ |
| Fixing a problem | {relevant domain} | troubleshooting/ |
| Cross-cutting concern | architecture | appropriate subfolder |
| Contributing guidance | contributing | - |
